% LRT.sty
%
% Do not change this file.
%
% 2016, Martin Losekamm, m.losekamm@tum.de

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{LRT}

\RequirePackage[utf8]{inputenc}
\RequirePackage{amsmath}
\RequirePackage{amsfonts}
\RequirePackage{amssymb}
\RequirePackage[english]{babel}
\RequirePackage{makeidx}
\RequirePackage{subfiles}
\RequirePackage{graphicx}
\RequirePackage{tabularx}
\RequirePackage{booktabs}
\RequirePackage{titling}
\RequirePackage{parskip}
\RequirePackage{fancyhdr}
\RequirePackage[explicit]{titlesec}
\RequirePackage{blindtext}
\RequirePackage[titles]{tocloft}
\RequirePackage[toc,page]{appendix}
\RequirePackage{units}
\graphicspath{{images/}}

\RequirePackage[top=3.6cm, bottom=3.6cm, left=2.6cm, right=2.6cm, headheight=1.5cm]{geometry}

% Set Helvetica/Arial as default font
\RequirePackage{helvet}
\renewcommand{\familydefault}{\sfdefault}

\RequirePackage[acronym, nonumberlist, nopostdot]{glossaries}
\setacronymstyle{long-short}
\makenoidxglossaries

% Redefine \title command for use in header
\renewcommand{\title}[1]{\gdef\@title{#1}\gdef\mytitle{#1}}

% Section headings
%
% Numbering depth
\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{2}

% Frontmatter
\titleformat{name = \section, numberless}
  {\centering\fontsize{16}{16}\selectfont}
  {}
  {0em}
  {#1}
\titleformat{name = \chapter, numberless}
  {\centering\fontsize{16}{16}\selectfont}
  {}
  {0em}
  {#1}
\titlespacing{name = \chapter, numberless}{0pt}{-24pt}{0pt}

% Mainmatter
% Chapter
\titleformat{\chapter}[hang]{\fontsize{16}{16}\selectfont\bfseries}{\thechapter}{3ex}{#1}
\titlespacing{\chapter}{0pt}{0pt}{12pt}
% Section
\titleformat{\section}[hang]{\fontsize{14}{14}\selectfont\bfseries}{\thesection}{3ex}{#1}[\vspace{-16pt}]
% Subsection
\titleformat{\subsection}[hang]{\fontsize{12}{12}\selectfont\bfseries}{\thesubsection}{3ex}{#1}[\vspace{-10pt}]
% Subsubsection
\titleformat{\subsubsection}[hang]{\fontsize{12}{12}\selectfont}{\thesubsubsection}{3ex}{#1}[\vspace{-10pt}]


% Custom header and footer
% 
% Remove chapter and number from \leftmark
\renewcommand{\chaptermark}[1]{\markboth{#1}{}}

% For frontmatter
\fancypagestyle{frontmatter}{
\fancyhf{}
\fancyfoot[RO,LE]{Page \thepage}
\fancyhead[LE]{
\renewcommand{\arraystretch}{0}
    \begin{tabularx}{\linewidth}{X p{5mm} m{10mm}}
        \raggedright \mytitle  & & \vspace{8mm}\includegraphics[height=10mm]{resources/tex/titlepage/images/Logo_LRT_neu_outline_A4.pdf}\\
        \raggedright \theauthor & & \\
    \end{tabularx}
}
%	\begingroup
%	\setlength{\tabcolsep}{0pt}
%	\renewcommand{\arraystretch}{0}
%	\begin{tabularx}{\linewidth}{m{10mm} p{5mm} X}
%		\vspace{6mm}\includegraphics[height=10mm]{resources/tex/titlepage/images/Logo_LRT_neu_outline_A4.pdf} & & \relax\ifvmode\raggedright\fi\nouppercase{\mytitle\hfill\newline\theauthor\hfill}
%	\end{tabularx}
%	\endgroup
%}
\fancyhead[RO]{
\renewcommand{\arraystretch}{0}
    \begin{tabularx}{\linewidth}{X p{5mm} m{10mm}}
        \raggedleft \mytitle  & & \vspace{8mm}\includegraphics[height=10mm]{resources/tex/titlepage/images/Logo_LRT_neu_outline_A4.pdf}\\
        \raggedleft \theauthor & & \\
    \end{tabularx}
}
%	\begingroup
%	\setlength{\tabcolsep}{0pt}
%	\renewcommand{\arraystretch}{0}
%	\begin{tabularx}{\linewidth}{X p{5mm} m{10mm}}
%		\relax\ifvmode\raggedleft\fi\nouppercase{\hfill\mytitle\newline\hfill\theauthor} & & \vspace{6mm}\includegraphics[height=10mm]{resources/tex/titlepage/images/Logo_LRT_neu_outline_A4.pdf}
%	\end{tabularx}
%	\endgroup
%}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}
}

% For mainmatter
\fancypagestyle{mainmatter}{
\fancyhf{}
\fancyfoot[RO,LE]{Page \thepage}
\fancyhead[LE]{
	\begingroup
	\setlength{\tabcolsep}{0pt}
	\renewcommand{\arraystretch}{0}
	\begin{tabularx}{\linewidth}{m{10mm} p{5mm} X}
		\vspace{6mm}\includegraphics[height=10mm]{resources/tex/titlepage/images/Logo_LRT_neu_outline_A4.pdf} & & \relax\ifvmode\raggedright\fi\nouppercase{\leftmark}
	\end{tabularx}
	\endgroup
	}
\fancyhead[RO]{
	\begingroup
	\setlength{\tabcolsep}{0pt}
	\renewcommand{\arraystretch}{0}
	\begin{tabularx}{\linewidth}{X p{5mm} m{10mm}}
		\relax\ifvmode\raggedleft\fi\nouppercase{\leftmark} & & \vspace{6mm}\includegraphics[height=10mm]{resources/tex/titlepage/images/Logo_LRT_neu_outline_A4.pdf}
	\end{tabularx}
	\endgroup
	}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}
}

% For first page of new chapter in mainmatter
\fancypagestyle{plain}{
\fancyhf{}
\fancyfoot[RO,LE]{Page \thepage}
\fancyhead[LE]{
	\begingroup
	\setlength{\tabcolsep}{0pt}
	\renewcommand{\arraystretch}{0}
	\begin{tabularx}{\linewidth}{m{10mm} p{5mm} X}
		\vspace{6mm}\includegraphics[height=10mm]{resources/tex/titlepage/images/Logo_LRT_neu_outline_A4.pdf} & & \relax\ifvmode\raggedright\fi\nouppercase{\leftmark}
	\end{tabularx}
	\endgroup
	}
\fancyhead[RO]{
	\begingroup
	\setlength{\tabcolsep}{0pt}
	\renewcommand{\arraystretch}{0}
	\begin{tabularx}{\linewidth}{X p{5mm} m{10mm}}
		\relax\ifvmode\raggedleft\fi\nouppercase{\leftmark} & & \vspace{6mm}\includegraphics[height=10mm]{resources/tex/titlepage/images/Logo_LRT_neu_outline_A4.pdf}
	\end{tabularx}
	\endgroup
	}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}
}

% Add fancy styles to first pages of TOC, LOF, LOT
\addtocontents{toc}{\protect\thispagestyle{frontmatter}}
\addtocontents{lof}{\protect\thispagestyle{frontmatter}}
\addtocontents{lot}{\protect\thispagestyle{frontmatter}}

% Apply fancy styles to matters
\RequirePackage{etoolbox}                                                   
\appto\frontmatter{\pagestyle{frontmatter}}                                       
\appto\mainmatter{\pagestyle{mainmatter}}                                        
\appto\backmatter{\pagestyle{mainmatter}}
\renewcommand*\glossarypreamble{\thispagestyle{frontmatter}}

% Change appearance of TOC
\renewcommand{\cftdotsep}{\cftnodots}
\setlength{\cftchapindent}{0pt}
\setlength{\cftsecindent}{0pt}
\setlength{\cftsubsecindent}{10pt}
\setlength{\cftbeforesecskip}{10pt}
\setlength{\cftchapnumwidth}{20pt}
\setlength{\cftsecnumwidth}{30pt}
\setlength{\cftsubsecnumwidth}{40pt}
\renewcommand{\cftchapfont}{\fontsize{12}{12}\selectfont\bfseries\scshape}
\renewcommand{\cftsecfont}{\fontsize{10}{10}\selectfont\bfseries}
\renewcommand{\cftsubsecfont}{\fontsize{10}{10}\selectfont}
\renewcommand{\cftchappagefont}{\fontsize{12}{12}\selectfont\bfseries}
\renewcommand{\cftsecpagefont}{\fontsize{10}{10}\selectfont\bfseries}
\renewcommand{\cftsubsecpagefont}{\fontsize{10}{10}\selectfont}

% Figure & table captions
\RequirePackage[labelfont=bf,font=bf]{caption}
\DeclareCaptionFormat{myformat}{\fontsize{11}{11}\selectfont#1#2#3}
\DeclareCaptionLabelSeparator{colonquad}{:\quad}
\captionsetup{format=myformat}
\captionsetup[figure]{labelformat=simple, labelsep=colonquad, name=Fig.}
\captionsetup[table]{position=above, labelformat=simple, labelsep=colonquad, name=Tab.}
\renewcommand{\thefigure}{\arabic{chapter}--\arabic{figure}}
\renewcommand{\thetable}{\arabic{chapter}--\arabic{table}}

% Change appearance of LOF
\renewcommand{\cftfigfont}{\fontsize{12}{12}\selectfont}
\renewcommand{\cftfigpresnum}{Fig. }
\renewcommand{\cftfigaftersnum}{:}
\setlength{\cftfigindent}{0pt}
\setlength{\cftfignumwidth}{70pt}

% Change appearance of LOT
\renewcommand{\cfttabfont}{\fontsize{12}{12}\selectfont}
\renewcommand{\cfttabpresnum}{Fig. }
\renewcommand{\cfttabaftersnum}{:}
\setlength{\cfttabindent}{0pt}
\setlength{\cfttabnumwidth}{70pt}


% Table spacing
\renewcommand{\arraystretch}{1.3}

% hyperref setup
\RequirePackage{hyperref}
\hypersetup{
	colorlinks = false,
	hidelinks = true
}

% equation numbering
\renewcommand{\theequation}{\thechapter--\arabic{equation}}


